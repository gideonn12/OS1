
#!/bin/bash

# Read the entire file into a buffer
buffer=$(cat "capmemel24_1.pgn")

# Replace newline characters with spaces
buffer=${buffer//$'\n'/ }

moves=()
# Try to match a full move in the buffer
while [[ $buffer =~ ([0-9]+\.[[:space:]]*[a-zA-Z0-9]+[[:space:]]*[a-zA-Z0-9]+) ]]; do
    # Extract the full move
    full_move=${BASH_REMATCH[1]}
    # Remove the first occurrence of the full move from the buffer
    buffer=${buffer/"$full_move"/}
    echo -e "full move +$full_move\n"
    # Send the full move to the Python script
    parsed_move=$(python3 parse_moves.py "$full_move")
    echo -e "$parsed_move\n"
    # Add the parsed move to the moves array
    moves+=("$parsed_move")
done